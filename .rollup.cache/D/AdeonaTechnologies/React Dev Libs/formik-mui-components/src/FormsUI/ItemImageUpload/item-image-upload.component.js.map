{"version":3,"file":"item-image-upload.component.js","sourceRoot":"","sources":["item-image-upload.component.jsx"],"names":[],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\nimport {FormField,} from \"./item-image-upload.styles\";\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\nimport {useField, useFormikContext} from \"formik\";\r\nimport {Avatar, Badge, Box, Button, Divider, Typography} from \"@mui/material\";\r\nimport {IMAGE_SIZE} from \"../../../../store/constants\";\r\nimport {useTheme} from \"@mui/material/styles\";\r\n\r\nconst DEFAULT_MAX_FILE_SIZE_IN_BYTES = IMAGE_SIZE;\r\n\r\nconst ItemImageUpload = ({\r\n                             label,\r\n                             name,\r\n                             maxFileSizeInBytes = DEFAULT_MAX_FILE_SIZE_IN_BYTES,\r\n                             ...otherProps\r\n                         }) => {\r\n    const theme = useTheme();\r\n    const fileInputField = useRef(null);\r\n    // const [files, setFiles] = useState({});\r\n    const {setFieldValue} = useFormikContext();\r\n    const [field, meta] = useField(name);\r\n    const [url, setUrl] = useState(null);\r\n\r\n    const handleUploadBtnClick = () => {\r\n        fileInputField.current.click();\r\n    };\r\n\r\n    const handleNewFileUpload = (e) => {\r\n        const {files: newFiles} = e.target;\r\n        if (newFiles.length) {\r\n            // console.log(\"file name\", name);\r\n            setFieldValue(name, newFiles[0]);\r\n            setUrl(URL.createObjectURL(newFiles[0]));\r\n        }\r\n    };\r\n\r\n    const removeFile = () => {\r\n        delete field.value[0];\r\n        setFieldValue(name, {...field.value});\r\n        setUrl(null);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (field.value && typeof field.value.name === 'string') {\r\n            setUrl(URL.createObjectURL(field.value));\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"row mb-4\">\r\n            <div className=\"col-md-12\">\r\n                <Typography variant=\"body1\" color=\"textSecondary\" textAlign=\"center\">\r\n                    {label}\r\n                </Typography>\r\n                <Box\r\n                    sx={{\r\n                        mt: 2,\r\n                        alignItems: \"center\",\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                    }}\r\n                >\r\n                    {url && <Badge\r\n                        overlap=\"circular\"\r\n                        anchorOrigin={{vertical: 'top', horizontal: 'right'}}\r\n                        badgeContent={\r\n                            <CancelIcon onClick={() => removeFile()}/>\r\n                        }\r\n                        sx={{cursor: 'pointer', color: theme.palette.primary.main, mb: -2, width: 135,}}\r\n                    />\r\n                    }\r\n                    <Avatar\r\n                        src={url}\r\n                        sx={{\r\n                            height: 130,\r\n                            mb: 2,\r\n                            width: 130,\r\n                            border: `5px solid ${theme.palette.primary[200]}`,\r\n                            color: theme.palette.primary[200]\r\n                        }}\r\n                    />\r\n\r\n                    <Typography color=\"secondary\" variant=\"caption\" style={{textAlign: 'center'}}>\r\n                        Select an image file on your computer (2MB max)\r\n                    </Typography>\r\n                </Box>\r\n                <Divider sx={{m: 2, borderBottomWidth: 1, borderBottomColor: theme.palette.primary.main}}/>\r\n                <Button color=\"primary\" fullWidth variant=\"outlined\" type=\"button\" onClick={handleUploadBtnClick}\r\n                        disabled={otherProps.disabled} startIcon={<CloudUploadIcon/>}>\r\n                    Upload picture\r\n                </Button>\r\n                <FormField\r\n                    type=\"file\"\r\n                    ref={fileInputField}\r\n                    onChange={handleNewFileUpload}\r\n                    title=\"\"\r\n                    value=\"\"\r\n                    {...otherProps}\r\n                />\r\n            </div>\r\n            <div className=\"col-md-12\">\r\n                {meta && meta.error ? <Typography variant=\"caption\" color='error'>{meta.error}</Typography> : null}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ItemImageUpload;"]}